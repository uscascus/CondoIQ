<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}CondoIQ{% endblock %}</title>
    <link rel="icon" href="{{ url_for('static', filename='imagens/logo.png') }}" type="image/png">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        /* Estilos genéricos para o layout */
        .container { display: flex; height: 100vh; }
        .sidebar {
            width: 220px;
            background: #1e3a8a;
            color: white;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .logo-link { margin-bottom: 30px; }
        .logo-img { max-width: 150px; height: auto; }
        .sidebar nav ul { list-style: none; width: 100%; padding: 0; }
        .sidebar nav ul li { width: 100%; }
        .sidebar nav ul li a {
            display: block;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            font-size: 16px;
            transition: background 0.3s;
        }
        .sidebar nav ul li a:hover,
        .sidebar nav ul li.active a {
            background: #2563eb;
            border-radius: 6px;
        }
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        /* Oculta o menu para a tela de login */
        .main-content.login-page .sidebar { display: none; }

        /* Estilos adicionais para os botões do menu */
        .btn {
            padding: 10px 14px; border-radius: 10px; border:1px solid #1e3a8a;
            background:#2563eb; cursor:pointer; font-weight:600;
            transition:.15s transform ease, .15s filter ease; box-shadow:0 1px 3px rgba(0,0,0,.1);
            color:#fff;
            text-decoration: none;
            display: block;
        }
        .btn:hover {
            transform:translateY(-1px); filter:brightness(0.98);
        }
        .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: 20px;
        border-bottom: 1px solid #e5e7eb;
        margin-bottom: 30px;
    }

    .page-title {
        font-size: 2rem;
        font-weight: 700;
        color: #1f2937;
        margin: 0;
    }

    .user-info {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 1rem;
    }

    .user-name {
        color: #4b5563;
        font-weight: 500;
    }

    .logout-link {
        color: #ef4444;
        text-decoration: none;
        font-weight: 600;
        transition: color 0.2s ease;
    }

    .logout-link:hover {
        color: #dc2626;
        text-decoration: underline;
    }

    /* Para dispositivos móveis */
    @media (max-width: 768px) {
        .header {
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
        }
        .user-info {
            align-self: flex-end;
        }
    }
    </style>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <a href="{{ url_for('dashboard') }}" class="logo-link">
                <img src="{{ url_for('static', filename='imagens/logo.png') }}" alt="Logo CondoIQ" class="logo-img">
            </a>
            
            {% if current_user.is_authenticated and current_user.tipo == 0 %}
            <nav>
                <ul>
                    <li class="{% if request.endpoint == 'dashboard' %}active{% endif %}">
                        <a href="{{ url_for('dashboard') }}">Home</a>
                    </li>
                    <li class="{% if request.endpoint == 'moradores_pendentes' %}active{% endif %}">
                        <a href="{{ url_for('moradores_pendentes') }}">Moradores Pendentes</a>
                    </li>
                    <li class="{% if request.endpoint == 'lista_reclamacoes_sindico' %}active{% endif %}">
                        <a href="{{ url_for('lista_reclamacoes_sindico') }}">Reclamações</a>
                    </li>
                    <li class="{% if request.endpoint == 'agendar_reuniao' %}active{% endif %}">
                        <a href="{{ url_for('agendar_reuniao') }}">Agendar Reunião</a>
                    </li>
                    <li class="{% if request.endpoint == 'comunicados' %}active{% endif %}">
                        <a href="{{ url_for('comunicados') }}">Comunicados</a>
                    </li>
                    <li class="{% if request.endpoint == 'gerenciar_usuarios' %}active{% endif %}">
                        <a href="{{ url_for('gerenciar_usuarios') }}">Gerenciar Usuários</a>
                    </li>
                </ul>
            </nav>
            {% else %}
            <nav>
                <ul>
                    <li class="{% if request.endpoint == 'dashboard' %}active{% endif %}">
                        <a href="{{ url_for('dashboard') }}">Home</a>
                    </li>
                    <li class="{% if request.endpoint == 'abrir_reclamacao' %}active{% endif %}">
                        <a href="{{ url_for('abrir_reclamacao') }}">Abrir Reclamação</a>
                    </li>
                    <li class="{% if request.endpoint == 'minhas_reclamacoes' %}active{% endif %}">
                        <a href="{{ url_for('minhas_reclamacoes') }}">Minhas Reclamações</a>
                    </li>

                </ul>
            </nav>
            {% endif %}
        </aside>

        <main class="main-content">
            <header class="header">
                <div class="header-left">
                    <h1 class="page-title">{% block page_title %}{% endblock %}</h1>
                </div>
                <div class="user-info">
                    {% if current_user.is_authenticated %}
                        <span class="user-name">Bem-vindo, **{{ current_user.nome.split()[0] }}**!</span>
                        <a href="{{ url_for('logout') }}" class="logout-link">Sair</a>
                    {% endif %}
                </div>
            </header>
            
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="flash-container">
                        {% for category, message in messages %}
                            <div class="flash {{ category }}">{{ message }}</div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            {% block content %}
            {% endblock %}
        </main>
    </div>
</body>
</html>